{"version":3,"file":"guardian.umd.js","sources":["../src/Context.js","../src/Provider.js","../src/hooks/useAuth.js","../src/withAuth.js"],"sourcesContent":["/**\r\n * @author Ray\r\n * @description Context\r\n */\r\nimport React from 'react';\r\n\r\n/**\r\n * @description 权限控制的上下文对象\r\n * @type {React.Context<{permissions: []}>}\r\n */\r\nexport const ReactAuthContext = React.createContext({\r\n    permissions: []\r\n});\r\n\r\nexport default ReactAuthContext;\r\n","/**\r\n * @author Ray\r\n * @description 提供一个权限使用的上下文\r\n */\r\nimport React from 'react';\r\nimport { ReactAuthContext } from './Context';\r\n\r\n/**\r\n * @description 顶层组件，将权限代码传向整个组件数。\r\n * @param children\r\n * @param permissions\r\n * @returns {*}\r\n * @constructor\r\n */\r\nexport default function Provider({ children, permissions }) {\r\n    return (\r\n        <ReactAuthContext.Provider\r\n            value={{\r\n                permissions\r\n            }}\r\n        >\r\n            {children}\r\n        </ReactAuthContext.Provider>\r\n    );\r\n}\r\n","/**\r\n * @author ray\r\n * @description 获取权限\r\n */\r\nimport { useContext } from 'react';\r\nimport { ReactAuthContext } from '../Context';\r\n\r\n/**\r\n *\r\n * @returns {{permissions: *[]}}\r\n */\r\nexport default function useAuth() {\r\n    const context = useContext(ReactAuthContext);\r\n\r\n    return context;\r\n}\r\n","/**\r\n * @author Ray\r\n * @description 获取context中存储的permission，判断如何处理包含的子组件。\r\n */\r\nimport useAuth from './hooks/useAuth';\r\n\r\n/**\r\n *\r\n * @param key\r\n * @returns {function(*): function(*): (boolean|*)}\r\n */\r\nexport function withAuth(key) {\r\n    /**\r\n     * @param component\r\n     */\r\n    return function(component) {\r\n        /**\r\n         * @param props\r\n         */\r\n        return function wrap(props) {\r\n            const keys = useAuth();\r\n\r\n            return key in keys && component({ ...props });\r\n        };\r\n    };\r\n}\r\n\r\nexport default withAuth;\r\n"],"names":["ReactAuthContext","React","createContext","permissions","Provider","children","useAuth","context","useContext","withAuth","key","component","wrap","props","keys"],"mappings":";;;;;;;;IAAA;;;;AAIA,IAEA;;;;;AAIA,IAAO,IAAMA,gBAAgB,GAAGC,cAAK,CAACC,aAAN,CAAoB;IAChDC,EAAAA,WAAW,EAAE;IADmC,CAApB,CAAzB;;ICVP;;;;AAIA,IAGA;;;;;;;;AAOA,IAAe,SAASC,QAAT,OAA6C;IAAA,MAAzBC,QAAyB,QAAzBA,QAAyB;IAAA,MAAfF,WAAe,QAAfA,WAAe;IACxD,SACIF,6BAAC,gBAAD,CAAkB,QAAlB;IACI,IAAA,KAAK,EAAE;IACHE,MAAAA,WAAW,EAAXA;IADG;IADX,KAKKE,QALL,CADJ;IASH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ICxBD;;;;AAIA,IAGA;;;;;AAIA,IAAe,SAASC,OAAT,GAAmB;IAC9B,MAAMC,OAAO,GAAGC,gBAAU,CAACR,gBAAD,CAA1B;IAEA,SAAOO,OAAP;IACH;;ICTD;;;;;;AAKA,IAAO,SAASE,QAAT,CAAkBC,GAAlB,EAAuB;IAC1B;;;IAGA,SAAO,UAASC,SAAT,EAAoB;IACvB;;;IAGA,WAAO,SAASC,IAAT,CAAcC,KAAd,EAAqB;IACxB,UAAMC,IAAI,GAAGR,OAAO,EAApB;IAEA,aAAOI,GAAG,IAAII,IAAP,IAAeH,SAAS,oBAAME,KAAN,EAA/B;IACH,KAJD;IAKH,GATD;IAUH;;;;;;;;;;;;;;;"}