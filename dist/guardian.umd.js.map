{"version":3,"file":"guardian.umd.js","sources":["../src/Context.js","../src/Provider.js","../src/withAuth.js"],"sourcesContent":["/**\r\n * @author Ray\r\n * @description Context\r\n */\r\nimport React from 'react';\r\n\r\nexport const ReactAuthContext = React.createContext({\r\n    permissions: []\r\n});\r\n\r\nexport default ReactAuthContext;\r\n","/**\r\n * @author Ray\r\n * @description 提供一个权限使用的上下文\r\n */\r\nimport React from 'react';\r\nimport { ReactAuthContext } from './Context';\r\n\r\n/**\r\n * @description 顶层组件，将权限代码传向整个组件数。\r\n * @param children\r\n * @param permissions\r\n * @returns {*}\r\n * @constructor\r\n */\r\nexport default function Provider({ children, permissions }) {\r\n    return (\r\n        <ReactAuthContext.Provider\r\n            value={{\r\n                permissions\r\n            }}\r\n        >\r\n            {children}\r\n        </ReactAuthContext.Provider>\r\n    );\r\n}\r\n","/**\r\n * @author Ray\r\n * @description 获取context中存储的permission，判断如何处理包含的子组件。\r\n */\r\nimport { useContext } from 'react';\r\nimport ReactAuthContext from './Context';\r\n\r\n/**\r\n * @description 返回一个新的组建，适用于函数组件\r\n * @param authKey\r\n * @returns {function(*): Function}\r\n */\r\nexport const withAuth = key => component => props => {\r\n    const Context = useContext(ReactAuthContext);\r\n    let inFlag = key in Context.permissions;\r\n    return inFlag ? component({ ...props }) : null;\r\n};\r\n\r\nexport default withAuth;\r\n"],"names":["ReactAuthContext","React","createContext","permissions","Provider","children","withAuth","key","component","props","Context","useContext","inFlag"],"mappings":";;;;;;;;IAAA;;;;AAIA,IAEO,IAAMA,gBAAgB,GAAGC,cAAK,CAACC,aAAN,CAAoB;IAChDC,EAAAA,WAAW,EAAE;IADmC,CAApB,CAAzB;;ICNP;;;;AAIA,IAGA;;;;;;;;AAOA,IAAe,SAASC,QAAT,OAA6C;IAAA,MAAzBC,QAAyB,QAAzBA,QAAyB;IAAA,MAAfF,WAAe,QAAfA,WAAe;IACxD,SACIF,6BAAC,gBAAD,CAAkB,QAAlB;IACI,IAAA,KAAK,EAAE;IACHE,MAAAA,WAAW,EAAXA;IADG;IADX,KAKKE,QALL,CADJ;IASH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ICjBD;;;;;;AAKA,IAAO,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAAAC,GAAG;IAAA,SAAI,UAAAC,SAAS;IAAA,WAAI,UAAAC,KAAK,EAAI;IACjD,UAAMC,OAAO,GAAGC,gBAAU,CAACX,gBAAD,CAA1B;IACA,UAAIY,MAAM,GAAGL,GAAG,IAAIG,OAAO,CAACP,WAA5B;IACA,aAAOS,MAAM,GAAGJ,SAAS,oBAAMC,KAAN,EAAZ,GAA6B,IAA1C;IACH,KAJuC;IAAA,GAAb;IAAA,CAApB;;;;;;;;;;;;;"}