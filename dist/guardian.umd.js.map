{"version":3,"file":"guardian.umd.js","sources":["../src/Context.js","../src/Provider.js","../src/hooks/useAuth.js","../src/withAuth.js"],"sourcesContent":["/**\n * @author Ray\n * @description Context\n */\nimport React from 'react';\n\n/**\n * @description 权限控制的上下文对象\n * @type {React.Context<{permissions: []}>}\n */\nexport const ReactAuthContext = React.createContext({\n    permissions: []\n});\n\nexport default ReactAuthContext;\n","/**\n * @author Ray\n * @description 提供一个权限使用的上下文\n */\nimport React from 'react';\nimport { ReactAuthContext } from './Context';\n\n/**\n * @description 顶层组件，将权限代码传向整个组件数。\n * @param children\n * @param permissions\n * @returns {*}\n * @constructor\n */\nexport default function Provider({ children, permissions }) {\n    return (\n        <ReactAuthContext.Provider\n            value={{\n                permissions\n            }}\n        >\n            {children}\n        </ReactAuthContext.Provider>\n    );\n}\n","/**\n * @author ray\n * @description 获取权限\n */\nimport { useContext } from 'react';\nimport { ReactAuthContext } from '../Context';\n\n/**\n *\n * @returns {{permissions: *[]}}\n */\nexport default function useAuth() {\n    const context = useContext(ReactAuthContext);\n\n    return context;\n}\n","/**\n * @author Ray\n * @description 获取context中存储的permission，判断如何处理包含的子组件。\n */\nimport useAuth from './hooks/useAuth';\nimport { inArray } from '@westernwood/utils';\n/**\n *\n * @param key\n * @returns {function(*): function(*): (boolean|*)}\n */\nexport function withAuth(key) {\n    /**\n     * @param component\n     */\n    return function(component) {\n        /**\n         * @param props\n         */\n        return function wrap(props) {\n            const { permissions } = useAuth();\n\n            return inArray(key, permissions) ? component({ ...props }) : null;\n        };\n    };\n}\n\nexport default withAuth;\n"],"names":["ReactAuthContext","React","createContext","permissions","Provider","children","useAuth","context","useContext","withAuth","key","component","wrap","props","inArray"],"mappings":";;;;;;;;IAAA;;;;AAIA,IAEA;;;;;AAIA,IAAO,IAAMA,gBAAgB,GAAGC,cAAK,CAACC,aAAN,CAAoB;IAChDC,EAAAA,WAAW,EAAE;IADmC,CAApB,CAAzB;;ICVP;;;;AAIA,IAGA;;;;;;;;AAOA,IAAe,SAASC,QAAT,OAA6C;IAAA,MAAzBC,QAAyB,QAAzBA,QAAyB;IAAA,MAAfF,WAAe,QAAfA,WAAe;IACxD,SACIF,6BAAC,gBAAD,CAAkB,QAAlB;IACI,IAAA,KAAK,EAAE;IACHE,MAAAA,WAAW,EAAXA;IADG;IADX,KAKKE,QALL,CADJ;IASH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ICxBD;;;;AAIA,IAGA;;;;;AAIA,IAAe,SAASC,OAAT,GAAmB;IAC9B,MAAMC,OAAO,GAAGC,gBAAU,CAACR,gBAAD,CAA1B;IAEA,SAAOO,OAAP;IACH;;ICTD;;;;;;AAKA,IAAO,SAASE,QAAT,CAAkBC,GAAlB,EAAuB;IAC1B;;;IAGA,SAAO,UAASC,SAAT,EAAoB;IACvB;;;IAGA,WAAO,SAASC,IAAT,CAAcC,KAAd,EAAqB;IAAA,qBACAP,OAAO,EADP;IAAA,UAChBH,WADgB,YAChBA,WADgB;;IAGxB,aAAOW,aAAO,CAACJ,GAAD,EAAMP,WAAN,CAAP,GAA4BQ,SAAS,oBAAME,KAAN,EAArC,GAAsD,IAA7D;IACH,KAJD;IAKH,GATD;IAUH;;;;;;;;;;;;;;;"}