{"version":3,"file":"guardian.umd.js","sources":["../src/Context.js","../src/Provider.js","../src/withPermission.js"],"sourcesContent":["/**\n * @author Ray\n * @description Context\n */\nimport React from 'react';\n\nexport const ReactAuthContext = React.createContext({\n    permissions: []\n});\n\nexport default ReactAuthContext;\n","/**\n * @author Ray\n * @description 提供一个权限使用的上下文\n */\nimport React, { useEffect } from 'react';\nimport { ReactAuthContext } from './Context';\n\nexport default function Provider({ children, context, permissions }) {\n    let Context = ReactAuthContext;\n\n    useEffect(function() {}, []);\n\n    if (context) {\n        Context = context;\n    }\n\n    return <Context.Provider value={{ permissions }}>{children}</Context.Provider>;\n}\n","/**\n * @author Ray\n * @description 获取context中存储的permission，判断如何处理包含的子组件。\n */\nimport { useContext } from 'react';\nimport ReactAuthContext from './Context';\n\n/**\n * @description 返回一个新的组建，适用于函数组件\n * @param authKey\n * @returns {function(*): Function}\n */\nexport const withPermission = authKey => wrapComponent => props => {\n    const authKeys = useContext(ReactAuthContext);\n\n    if (authKey in authKeys) {\n        return wrapComponent({ ...props });\n    }\n    return null;\n};\n\nexport default withPermission;\n"],"names":["ReactAuthContext","React","createContext","permissions","Provider","children","context","Context","useEffect","withPermission","authKey","wrapComponent","props","authKeys","useContext"],"mappings":";;;;;;;;IAAA;;;;AAIA,IAEO,IAAMA,gBAAgB,GAAGC,cAAK,CAACC,aAAN,CAAoB;IAChDC,EAAAA,WAAW,EAAE;IADmC,CAApB,CAAzB;;ICNP;;;;AAIA,IAGe,SAASC,QAAT,OAAsD;IAAA,MAAlCC,QAAkC,QAAlCA,QAAkC;IAAA,MAAxBC,OAAwB,QAAxBA,OAAwB;IAAA,MAAfH,WAAe,QAAfA,WAAe;IACjE,MAAII,OAAO,GAAGP,gBAAd;IAEAQ,EAAAA,eAAS,CAAC,YAAW,EAAZ,EAAgB,EAAhB,CAAT;;IAEA,MAAIF,OAAJ,EAAa;IACTC,IAAAA,OAAO,GAAGD,OAAV;IACH;;IAED,SAAOL,6BAAC,OAAD,CAAS,QAAT;IAAkB,IAAA,KAAK,EAAE;IAAEE,MAAAA,WAAW,EAAXA;IAAF;IAAzB,KAA2CE,QAA3C,CAAP;IACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ICVD;;;;;;AAKA,IAAO,IAAMI,cAAc,GAAG,SAAjBA,cAAiB,CAAAC,OAAO;IAAA,SAAI,UAAAC,aAAa;IAAA,WAAI,UAAAC,KAAK,EAAI;IAC/D,UAAMC,QAAQ,GAAGC,gBAAU,CAACd,gBAAD,CAA3B;;IAEA,UAAIU,OAAO,IAAIG,QAAf,EAAyB;IACrB,eAAOF,aAAa,oBAAMC,KAAN,EAApB;IACH;;IACD,aAAO,IAAP;IACH,KAPqD;IAAA,GAAjB;IAAA,CAA9B;;;;;;;;;;;;;"}