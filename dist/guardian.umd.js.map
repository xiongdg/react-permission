{"version":3,"file":"guardian.umd.js","sources":["../src/Context.js","../src/Provider.js","../src/withPermission.js"],"sourcesContent":["/**\r\n * @author Ray\r\n * @description Context\r\n */\r\nimport React from 'react';\r\n\r\nexport const ReactAuthContext = React.createContext({\r\n    permissions: []\r\n});\r\n\r\nexport default ReactAuthContext;\r\n","/**\r\n * @author Ray\r\n * @description 提供一个权限使用的上下文\r\n */\r\nimport React, { useEffect } from 'react';\r\nimport { ReactAuthContext } from './Context';\r\n\r\nexport default function Provider({ children, context, permissions }) {\r\n    let Context = ReactAuthContext;\r\n\r\n    useEffect(function() {}, []);\r\n\r\n    if (context) {\r\n        Context = context;\r\n    }\r\n\r\n    return <Context.Provider value={{ permissions }}>{children}</Context.Provider>;\r\n}\r\n","/**\r\n * @author Ray\r\n * @description 获取context中存储的permission，判断如何处理包含的子组件。\r\n */\r\nimport { useContext } from 'react';\r\nimport ReactAuthContext from './Context';\r\n\r\n/**\r\n * @description 返回一个新的组建，适用于函数组件\r\n * @param authKey\r\n * @returns {function(*): Function}\r\n */\r\nexport const withPermission = authKey => wrapComponent => props => {\r\n    const authKeys = useContext(ReactAuthContext);\r\n\r\n    if (authKey in authKeys) {\r\n        return wrapComponent({ ...props });\r\n    }\r\n    return null;\r\n};\r\n\r\nexport default withPermission;\r\n"],"names":["ReactAuthContext","React","createContext","permissions","Provider","children","context","Context","useEffect","withPermission","authKey","wrapComponent","props","authKeys","useContext"],"mappings":";;;;;;;;IAAA;;;;AAIA,IAEO,IAAMA,gBAAgB,GAAGC,cAAK,CAACC,aAAN,CAAoB;IAChDC,EAAAA,WAAW,EAAE;IADmC,CAApB,CAAzB;;ICNP;;;;AAIA,IAGe,SAASC,QAAT,OAAsD;IAAA,MAAlCC,QAAkC,QAAlCA,QAAkC;IAAA,MAAxBC,OAAwB,QAAxBA,OAAwB;IAAA,MAAfH,WAAe,QAAfA,WAAe;IACjE,MAAII,OAAO,GAAGP,gBAAd;IAEAQ,EAAAA,eAAS,CAAC,YAAW,EAAZ,EAAgB,EAAhB,CAAT;;IAEA,MAAIF,OAAJ,EAAa;IACTC,IAAAA,OAAO,GAAGD,OAAV;IACH;;IAED,SAAOL,6BAAC,OAAD,CAAS,QAAT;IAAkB,IAAA,KAAK,EAAE;IAAEE,MAAAA,WAAW,EAAXA;IAAF;IAAzB,KAA2CE,QAA3C,CAAP;IACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ICVD;;;;;;AAKA,IAAO,IAAMI,cAAc,GAAG,SAAjBA,cAAiB,CAAAC,OAAO;IAAA,SAAI,UAAAC,aAAa;IAAA,WAAI,UAAAC,KAAK,EAAI;IAC/D,UAAMC,QAAQ,GAAGC,gBAAU,CAACd,gBAAD,CAA3B;;IAEA,UAAIU,OAAO,IAAIG,QAAf,EAAyB;IACrB,eAAOF,aAAa,oBAAMC,KAAN,EAApB;IACH;;IACD,aAAO,IAAP;IACH,KAPqD;IAAA,GAAjB;IAAA,CAA9B;;;;;;;;;;;;;"}