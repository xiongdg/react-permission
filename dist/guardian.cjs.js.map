{"version":3,"file":"guardian.cjs.js","sources":["../src/Context.js","../src/Provider.js","../src/hooks/useAuth.js","../src/withAuth.js"],"sourcesContent":["/**\n * @author Ray\n * @description Context\n */\nimport React from 'react';\n\n/**\n * @description 权限控制的上下文对象\n * @type {React.Context<{permissions: []}>}\n */\nexport const ReactAuthContext = React.createContext({\n    permissions: []\n});\n\nexport default ReactAuthContext;\n","/**\n * @author Ray\n * @description 提供一个权限使用的上下文\n */\nimport React from 'react';\nimport { ReactAuthContext } from './Context';\n\n/**\n * @description 顶层组件，将权限代码传向整个组件数。\n * @param children\n * @param permissions\n * @returns {*}\n * @constructor\n */\nexport default function Provider({ children, permissions }) {\n    return (\n        <ReactAuthContext.Provider\n            value={{\n                permissions\n            }}\n        >\n            {children}\n        </ReactAuthContext.Provider>\n    );\n}\n","/**\n * @author ray\n * @description 获取权限\n */\nimport { useContext } from 'react';\nimport { ReactAuthContext } from '../Context';\n\n/**\n *\n * @returns {{permissions: *[]}}\n */\nexport default function useAuth() {\n    const context = useContext(ReactAuthContext);\n\n    return context;\n}\n","/**\n * @author Ray\n * @description 获取context中存储的permission，判断如何处理包含的子组件。\n */\nimport useAuth from './hooks/useAuth';\n\n/**\n *\n * @param key\n * @returns {function(*): function(*): (boolean|*)}\n */\nexport function withAuth(key) {\n    /**\n     * @param component\n     */\n    return function(component) {\n        /**\n         * @param props\n         */\n        return function wrap(props) {\n            const keys = useAuth();\n\n            return key in keys && component({ ...props });\n        };\n    };\n}\n\nexport default withAuth;\n"],"names":["ReactAuthContext","React","createContext","permissions","Provider","children","useAuth","context","useContext","withAuth","key","component","wrap","props","keys"],"mappings":";;;;;;;;;AAAA;;;;AAIA,AAEA;;;;;AAIA,AAAO,IAAMA,gBAAgB,GAAGC,cAAK,CAACC,aAAN,CAAoB;EAChDC,WAAW,EAAE;CADe,CAAzB;;ACVP;;;;AAIA,AAGA;;;;;;;;AAOA,AAAe,SAASC,QAAT,OAA6C;MAAzBC,QAAyB,QAAzBA,QAAyB;MAAfF,WAAe,QAAfA,WAAe;SAEpDF,6BAAC,gBAAD,CAAkB,QAAlB;IACI,KAAK,EAAE;MACHE,WAAW,EAAXA;;KAGHE,QALL,CADJ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACfJ;;;;AAIA,AAGA;;;;;AAIA,AAAe,SAASC,OAAT,GAAmB;MACxBC,OAAO,GAAGC,gBAAU,CAACR,gBAAD,CAA1B;SAEOO,OAAP;;;ACRJ;;;;;;AAKA,AAAO,SAASE,QAAT,CAAkBC,GAAlB,EAAuB;;;;SAInB,UAASC,SAAT,EAAoB;;;;WAIhB,SAASC,IAAT,CAAcC,KAAd,EAAqB;UAClBC,IAAI,GAAGR,OAAO,EAApB;aAEOI,GAAG,IAAII,IAAP,IAAeH,SAAS,oBAAME,KAAN,EAA/B;KAHJ;GAJJ;;;;;;;;"}