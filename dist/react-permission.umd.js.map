{"version":3,"file":"react-permission.umd.js","sources":["../src/provider.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\n\nexport const AuthContext = React.createContext({});\n\nProvider.defaultProps = {\n    children: null,\n    permissions: [],\n    fetchPermissions: () => Promise.resolve([]),\n    parser: () => []\n};\n\nexport default function Provider({ children, fetchPermissions, permissions, parser }) {\n    const [permissionKeys, setPermissions] = useState(permissions);\n    useEffect(() => {\n        fetchPermissions().then(res => {\n            let parsedData = parser(res);\n            setPermissions([...new Set([...permissions, ...parsedData])]);\n        });\n    }, []);\n    return (\n        <AuthContext.Provider\n            value={{\n                permissions: permissionKeys,\n                setPermissions // 提供在子组件中修改权限的一个方法\n            }}\n        >\n            {children}\n        </AuthContext.Provider>\n    );\n}\n"],"names":["AuthContext","React","createContext","Provider","defaultProps","children","permissions","fetchPermissions","Promise","resolve","parser","useState","permissionKeys","setPermissions","useEffect","then","res","parsedData","Set"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAEO,IAAMA,WAAW,GAAGC,cAAK,CAACC,aAAN,CAAoB,EAApB,CAApB;EAEPC,QAAQ,CAACC,YAAT,GAAwB;EACpBC,EAAAA,QAAQ,EAAE,IADU;EAEpBC,EAAAA,WAAW,EAAE,EAFO;EAGpBC,EAAAA,gBAAgB,EAAE;EAAA,WAAMC,OAAO,CAACC,OAAR,CAAgB,EAAhB,CAAN;EAAA,GAHE;EAIpBC,EAAAA,MAAM,EAAE;EAAA,WAAM,EAAN;EAAA;EAJY,CAAxB;AAOA,EAAe,SAASP,QAAT,OAAuE;EAAA,MAAnDE,QAAmD,QAAnDA,QAAmD;EAAA,MAAzCE,gBAAyC,QAAzCA,gBAAyC;EAAA,MAAvBD,WAAuB,QAAvBA,WAAuB;EAAA,MAAVI,MAAU,QAAVA,MAAU;;EAAA,kBACzCC,cAAQ,CAACL,WAAD,CADiC;EAAA;EAAA,MAC3EM,cAD2E;EAAA,MAC3DC,cAD2D;;EAElFC,EAAAA,eAAS,CAAC,YAAM;EACZP,IAAAA,gBAAgB,GAAGQ,IAAnB,CAAwB,UAAAC,GAAG,EAAI;EAC3B,UAAIC,UAAU,GAAGP,MAAM,CAACM,GAAD,CAAvB;EACAH,MAAAA,cAAc,oBAAK,IAAIK,GAAJ,8BAAYZ,WAAZ,sBAA4BW,UAA5B,GAAL,EAAd;EACH,KAHD;EAIH,GALQ,EAKN,EALM,CAAT;EAMA,SACIhB,6BAAC,WAAD,CAAa,QAAb;EACI,IAAA,KAAK,EAAE;EACHK,MAAAA,WAAW,EAAEM,cADV;EAEHC,MAAAA,cAAc,EAAdA,cAFG;;EAAA;EADX,KAMKR,QANL,CADJ;EAUH;;;;;;;;;;;;"}