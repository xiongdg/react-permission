{"version":3,"file":"react-permission.cjs.js","sources":["../src/provider.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\n\nexport const AuthContext = React.createContext({});\n\nProvider.defaultProps = {\n    children: null,\n    permissions: [],\n    fetchPermissions: () => Promise.resolve([]),\n    parser: () => []\n};\n\nexport default function Provider({ children, fetchPermissions, permissions, parser }) {\n    const [permissionKeys, setPermissions] = useState(permissions);\n    useEffect(() => {\n        fetchPermissions().then(res => {\n            let parsedData = parser(res);\n            setPermissions([...new Set([...permissions, ...parsedData])]);\n        });\n    }, []);\n    return (\n        <AuthContext.Provider\n            value={{\n                permissions: permissionKeys,\n                setPermissions // 提供在子组件中修改权限的一个方法\n            }}\n        >\n            {children}\n        </AuthContext.Provider>\n    );\n}\n"],"names":["AuthContext","React","createContext","Provider","defaultProps","children","permissions","fetchPermissions","Promise","resolve","parser","useState","permissionKeys","setPermissions","useEffect","then","res","parsedData","Set"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEO,IAAMA,WAAW,GAAGC,cAAK,CAACC,aAAN,CAAoB,EAApB,CAApB;AAEPC,QAAQ,CAACC,YAAT,GAAwB;EACpBC,QAAQ,EAAE,IADU;EAEpBC,WAAW,EAAE,EAFO;EAGpBC,gBAAgB,EAAE;WAAMC,OAAO,CAACC,OAAR,CAAgB,EAAhB,CAAN;GAHE;EAIpBC,MAAM,EAAE;WAAM,EAAN;;CAJZ;AAOA,AAAe,SAASP,QAAT,OAAuE;MAAnDE,QAAmD,QAAnDA,QAAmD;MAAzCE,gBAAyC,QAAzCA,gBAAyC;MAAvBD,WAAuB,QAAvBA,WAAuB;MAAVI,MAAU,QAAVA,MAAU;;kBACzCC,cAAQ,CAACL,WAAD,CADiC;;MAC3EM,cAD2E;MAC3DC,cAD2D;;EAElFC,eAAS,CAAC,YAAM;IACZP,gBAAgB,GAAGQ,IAAnB,CAAwB,UAAAC,GAAG,EAAI;UACvBC,UAAU,GAAGP,MAAM,CAACM,GAAD,CAAvB;MACAH,cAAc,oBAAK,IAAIK,GAAJ,8BAAYZ,WAAZ,sBAA4BW,UAA5B,GAAL,EAAd;KAFJ;GADK,EAKN,EALM,CAAT;SAOIhB,6BAAC,WAAD,CAAa,QAAb;IACI,KAAK,EAAE;MACHK,WAAW,EAAEM,cADV;MAEHC,cAAc,EAAdA,cAFG;;;KAKNR,QANL,CADJ;;;;;"}